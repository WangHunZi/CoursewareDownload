<!DOCTYPE html><html class="h-100">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="../../../static/css/base.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.font.im/css?family=Source+Serif+Pro%7CLato%7CInconsolata" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="../../../static/img/favicon.png" type="image/x-icon">

  <style>
    .font-sans {
      font-family: 'Lato', 'SimHei', 'STHeiti', 'SimHei', 'Serif';
    }
    .font-serif {
      font-family: 'Source Serif Pro', 'Songti SC', 'SimSun', 'Serif', serif;
    }
  </style>
  <link rel="stylesheet" href="../../../static/katex/katex.min.css">
  <script defer src="../../../static/katex/katex.min.js"></script>
  <script defer src="../../../static/katex/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
  <script>
      document.addEventListener("DOMContentLoaded", function() {
          renderMathInElement(document.body, {
            // customised options
            // • auto-render specific keys, e.g.:
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false},
                {left: '\\(', right: '\\)', display: false},
                {left: '\\[', right: '\\]', display: true}
            ],
            // • rendering keys, e.g.:
            throwOnError : false
          });
      });
  </script>


  

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="../../../static/reveal/reveal.css">
<link rel="stylesheet" href="../../../static/reveal/theme/simple.css" id="theme">

<style>
.reveal .slide-number {
  font-size: 26px;
  border-radius: 5px;
  background-color: rgba(0, 0, 0, .3);
}

.reveal .full-screen {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
}

.reveal .slides {
  border: 1.5px #ddd solid;
  border-radius: 7px;
  text-align: left;
  font-weight: 300;
}

.reveal h1, .reveal h2, .reveal h3, .reveal h4 {
  font-family: 'Lato', 'SimHei', 'STXihei', 'Droid Sans';
  font-weight: 400;
}

.reveal p, .reveal li, .reveal center {
  font-size: 32px;
  font-family: 'Lato', 'STHeiti', 'SimHei', 'Droid Sans';
}

.reveal li + li {
  margin-top: 10px;
}

.reveal ul {
  display: block;
  margin-right: 15px;
}

.reveal p, .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5 {
  padding:  0 25px 0 25px;
}

.reveal table {
  font-size: 32px;
  font-family: 'Lato', 'STHeiti', 'SimHei', 'Sans Serif';
  margin-top: 15px;
  margin-bottom: 15px;
}

.reveal th {
  background-color: #eee;
}

.reveal tr:nth-child(even) {
  background-color: #efffff;
}

.reveal h1,
.reveal h2,
.reveal h3,
.reveal h4,
.reveal h5,
.reveal h6 {
  text-align: left;
  margin: 0 0 20px 0;
 color: #222; 
  font-weight: 400;
  line-height: 1.2;
  letter-spacing: normal;
}



.reveal h1 {
  margin: 0 10 0 10;
  font-size: 60px;
}
.reveal .middle h1 {
  text-align: center;
}

.reveal h2 {
  font-size: 48px;
  border-bottom: 2px solid rgb(106, 0, 95);
  padding-bottom: 5px;
}
.reveal h3 { font-size: 1.15em; }
.reveal h4 { font-size: 1.05em; }

.reveal .center {
  text-align: center;
}

.reveal .middle {
  height: 728px;
  display: flex;
  align-items: center;
  width: 100%;
}

.reveal pre {
  font-size: 28px;
 
  background-color: #eee;

  border-radius: 3mm;
  padding: 10px 10px 10px 10px;
}

.reveal pre code {
  max-height: none;
}

.reveal code {
  font-family: 'Inconsolata', 'AR PL Ukai CN', 'STKaiti', 'KaiTi', 'Sans Serif', Monospace;
}

.reveal .middle blockquote {
  text-align: center;
  color: rgb(106, 0, 95);
  background: none;
  box-shadow: none;
}

.reveal .middle blockquote a {
  color: inherit;
}

.reveal blockquote p, .reveal blockquote li {
  font-family: 'Lato', 'AR PL Ukai CN', 'STKaiti', 'KaiTi', 'Sans Serif';
}

section .center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.reveal .author-block {
  margin: 75px 0 35px 0;
}
.reveal .author-affiliation img {
  margin: 15px 0 0 0;
}
.reveal .author-block p, .reveal .author-affiliation p  {
  font-family: 'Kaiti', 'STKaiti', 'Serif', 'Times', 'Times New Roman';
  margin-block-start: 0em;
  margin-block-end: 0em;
}
.reveal .author-affiliation {
  display: inline-block;
  font-size: 90%;
}
.reveal hr {
  border: 10px solid rgba(0, 0, 0, 0);
}
.reveal li {
  margin-top: 10px;
}
</style>

  <title>操作系统概述</title>
</head>

<body class="d-flex flex-column h-100">
  
  

<div class="reveal">
<div class="slides">
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="_1" class=" text-2xl mt-2 font-sans">操作系统概述</h1>
<p class=" font-serif my-1"><include src="Slides_Author"><div><div class="py-16">
<p class=" font-serif my-1"><a href="http://ics.nju.edu.cn/~jyy" class=" text-amber-900">蒋炎岩</a></p>
</div>
<div class="row">
<div class="author-affiliation">
    <a href="http://www.nju.edu.cn/" class=" text-amber-900"><p class=" font-serif my-1">　　南京大学　　</p>
    <img class="inline-img h-24" src="../../../static/img/nju-logo.jpg" style="display: inline-block;"></a>
  </div>
<div class="author-affiliation">
   <a href="http://cs.nju.edu.cn/" class=" text-amber-900"><p class=" font-serif my-1">计算机科学与技术系</p>
    <img class="inline-img h-24" src="../../../static/img/njucs-logo.jpg" style="display: inline-block;"></a>
  </div>
<div class="author-affiliation">
    <a href="https://cs.nju.edu.cn/ics/" class=" text-amber-900"><p class=" font-serif my-1">计算机软件研究所</p>
    <img class="inline-img h-24" src="../../../static/img/ics-logo.png" style="display: inline-block;"></a>
  </div>
</div></div></include></p></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">背景</h2>
<p class=" font-serif my-1">每个学校都要开《操作系统》课……</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">但为什么要学操作系统呢？<ul class=" list-disc font-serif">
<li class=" ml-8">为什么要学微积分/离散数学/XXXX/……？</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">长辈/学长：<del>擦干泪不要问为什么</del></p>
<ul class=" list-disc font-serif">
<li class=" ml-8">学习操作系统的原因<ul class=" list-disc font-serif">
<li class=" ml-8">你每天都在用的东西，但你却不明白<ul class=" list-disc font-serif">
<li class=" ml-8">为什么<del>你正在看直播的</del>浏览器/终端/...能创建一个窗口？</li>
<li class=" ml-8">为什么 Ctrl-C 有时能退出程序、有时不能？<ul class=" list-disc font-serif">
<li class=" ml-8"><red>编程基础不扎实就回头补！任何时候都不迟！</red></li>
</ul>
</li>
</ul>
</li>
<li class=" ml-8">你体内 “编程的力量” 尚未完全觉醒<ul class=" list-disc font-serif">
<li class=" ml-8">编译器、IDE、游戏、游戏外挂、任务管理器、杀毒软件……</li>
</ul>
</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">本次课内容与目标</h2>
<p class=" font-serif my-1">快速过完学习 “操作系统” 之前你应该掌握的知识</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">可以从学期开始、节奏尚未加快的时候快速补充</li>
</ul>
<hr>
<p class=" font-serif my-1">快速过完 “操作系统” 课程的全部内容</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">给这学期学什么一个宏观的认识</li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="_1" class=" text-2xl mt-2 font-sans">课程概况</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">最重要的事情最先说</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">所有课程信息都在<a href="http://jyywiki.cn/OS/2021/" class=" text-amber-900">课程主页</a>发布 & RTFM。</p>
</blockquote>
<hr>
<p class=" font-serif my-1">成绩构成</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">期末考试 40% + 随堂期中测验 10% </li>
<li class=" ml-8">大实验 25% + 小实验 25%<ul class=" list-disc font-serif">
<li class=" ml-8">soft + hard deadlines<ul class=" list-disc font-serif">
<li class=" ml-8"><red>不要对编程抱有任何侥幸心理</red></li>
<li class=" ml-8">不付出足够的努力编程必挂</li>
</ul>
</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">特别注意事项</h2>
<p class=" font-serif my-1">不要求到课 (把时间花在更有效的地方)</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">努力上传视频，但不保证设备不会翻车</li>
</ul>
<hr>
<p class=" font-serif my-1">准备好 Linux 环境</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">x86-64<ul class=" list-disc font-serif">
<li class=" ml-8">只有 ARM 设备 → 把系统装在优盘上去机房学习</li>
</ul>
</li>
<li class=" ml-8">可以没有图形界面 (或者说没有图形界面可能更好)</li>
</ul>
<hr>
<p class=" font-serif my-1">在不违背 <a href="http://integrity.mit.edu" class=" text-amber-900">academic integrity</a> 的前提下寻求帮助</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">这很难，但坚持下来的人会变得更不一样</li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="_1" class=" text-2xl mt-2 font-sans">上课之前 (八卦部分)</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">个人简介</h2>
<p class=" font-serif my-1"><img alt="" class="float-right" src="http://ics.nju.edu.cn/~jyy/img/frog-head.jpg" width="250px"></p>
<p class=" font-serif my-1"><del>努力成为卷王的临时工✖️</del> (<a href="http://ics.nju.edu.cn/centers/" class=" text-amber-900">计算机软件研究所✔</a>)</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">CCF 优秀博士论文奖</li>
<li class=" ml-8">ACM SIGSOFT Distinguished Paper Award</li>
<li class=" ml-8">MSRA Fellowship Award</li>
</ul>
<hr>
<p class=" font-serif my-1">Co-Founder of Project-N</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">在 bare-metal 上实现完整计算机系统</li>
</ul>
<hr>
<p class=" font-serif my-1">JSOI/<strike>南京大学 ICPC 集训队教练</strike></p>
<ul class=" list-disc font-serif">
<li class=" ml-8">NOI/NOIP 系列赛江苏赛区技术负责人；偶尔出题</li>
<li class=" ml-8">ICPC World Finals 49th Place (2009, team leader)</li>
<li class=" ml-8">ICPC World Finals 13th Place (2019, co-coach)</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">为什么来教操作系统？</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">主要问题是...充满热情而且相当聪明的学生...仍然保持他们的兴趣...早就听说过物理学如何有趣、如何引人入胜...相对论、量子力学...</p>
<p class=" font-serif my-1">但是，当他们学完两年我们以前的那种课程后，许多人就泄气了...很少有意义重大的、新颖的和现代的观念...学的还是斜面、静电及诸如此类的内容...</p>
<p class=" font-serif my-1">——《The Feynman Lectures on Physics》</p>
</blockquote>
<hr>
<p class=" font-serif my-1">我学《操作系统》的时候 (2009)</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">不知所云的中文教材</li>
<li class=" ml-8">没有正经的实验 (写一些 16-bit code)</li>
<li class=" ml-8">没有合理的 toolchain 和指导，调试全靠蛮力和猜</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">我竟然活下来了？</h2>
<p class=" font-serif my-1">我们生活在一个好的时代</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">互联网上应有尽有<ul class=" list-disc font-serif">
<li class=" ml-8">但大家可能还没有完全准备好适应它</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">操作系统课给你想要的全部</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">如果悟性比较好，学完这门课你就在系统方向 “<red>毕业</red>” 了<ul class=" list-disc font-serif">
<li class=" ml-8">编写一切 “能写出来” 程序的能力<ul class=" list-disc font-serif">
<li class=" ml-8">从此以后只有研究论文能满足你的口味了</li>
</ul>
</li>
</ul>
</li>
<li class=" ml-8">如果悟性一般，也会受到充足的训练 (和打击)</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">三周目反思</h2>
<p class=" font-serif my-1">课程的逻辑组织获得了成功</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">今年继续改进 (有微调)</li>
</ul>
<hr>
<p class=" font-serif my-1">Online Judge + 抓抄袭获得了成功</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">AI 挂了 1/3 的同学，受到了领导约谈<ul class=" list-disc font-serif">
<li class=" ml-8">这次没有 AI 的同学了，come on!</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">上次直播了一个学期……但对着屏幕直播根本就是灾难</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">呃……啊……嗯……这个……<ul class=" list-disc font-serif">
<li class=" ml-8">有一块黑板就好了</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="_1" class=" text-2xl mt-2 font-sans">此时此刻你应该掌握的知识</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1-c" class=" text-xl mt-2 pb-2 font-sans">(1) 将需求实现成 (C 语言) 代码的能力</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">能管理一定规模 (数千到数万行) 的代码。</p>
<p class=" font-serif my-1">懂得在程序不正确运行时默念一遍 “机器永远是对的” 然后开始用正确的工具/方法调试。</p>
</blockquote>
<p class=" font-serif my-1">上学期经过的训练就足够了</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">给出手册，写出一个 x86/RISC-V/MIPS 全系统模拟器</li>
</ul>
<hr>
<p class=" font-serif my-1">如果你在上课时感到异常吃力</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">编程，编程，编程</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="2" class=" text-xl mt-2 pb-2 font-sans">(2) 《计算机系统基础》课程知识</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">具有二进制代码的基本知识。</p>
</blockquote>
<ul class=" list-disc font-serif">
<li class=" ml-8">数据/程序的机器级表示</li>
<li class=" ml-8">程序的编译和链接</li>
<li class=" ml-8">ELF 文件格式</li>
<li class=" ml-8">程序的执行……</li>
</ul>
<hr>
<p class=" font-serif my-1">工具使用</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">能阅读理解汇编语言</li>
<li class=" ml-8">会使用 binutils 中的常用工具</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="3-linux" class=" text-xl mt-2 pb-2 font-sans">(3) 基本的 Linux 命令行工具使用</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">会 STFW/RTFM 自己动手解决问题。</p>
</blockquote>
<p class=" font-serif my-1">不需要多么熟练</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">有基本的概念即可<ul class=" list-disc font-serif">
<li class=" ml-8">基础命令；管道/重定向的使用……</li>
<li class=" ml-8">shell 是基于文本替换的编程语言</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="_1" class=" text-2xl mt-2 font-sans">你将在这门课学到的</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">操作系统：极简概述</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">Operating System: A body of software, in fact, that is responsible for <em>making it easy to run programs</em> (even allowing you to seemingly run many at the same time), allowing programs to share memory, enabling programs to interact with devices, and other fun stuff like that. (OSTEP)</p>
</blockquote></div>
        
      
         <div class="fragment"> 
        <div><hr>
<p class=" font-serif my-1">很多疑点</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">“programs” 就完了？那么多复杂的程序呢！</li>
<li class=" ml-8">“shared memory, interact with devices, ...”？</li>
</ul></div>
         </div> 
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="contd" class=" text-xl mt-2 pb-2 font-sans">操作系统：极简概述 (cont'd)</h2>
<p class=" font-serif my-1">本次课程的 three easy pieces</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">问题 1：什么是程序<ul class=" list-disc font-serif">
<li class=" ml-8">多线程程序的状态机模型</li>
</ul>
</li>
<li class=" ml-8">问题 2：程序眼中的操作系统应该什么样的？<red>(设计)</red><ul class=" list-disc font-serif">
<li class=" ml-8">操作系统是一组 “系统调用” API (和 API 能访问的对象)<ul class=" list-disc font-serif">
<li class=" ml-8">MiniLabs</li>
</ul>
</li>
</ul>
</li>
<li class=" ml-8">问题 3：怎么才能写出一个操作系统？ <red>(实现)</red><ul class=" list-disc font-serif">
<li class=" ml-8">操作系统就是个 C 程序 (使用硬件提供的机制)</li>
<li class=" ml-8">完成初始化后就成为 interrupt/trap/fault handler<ul class=" list-disc font-serif">
<li class=" ml-8">OSLabs</li>
</ul>
</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="api" class=" text-xl mt-2 pb-2 font-sans">理解操作系统：程序 + API + 计算机硬件</h2>
<p class=" font-serif my-1">操作系统不是忽然成为现在这个样子的</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">程序、API、计算机硬件<ul class=" list-disc font-serif">
<li class=" ml-8">计算机硬件发展 → 更复杂的应用和 API</li>
<li class=" ml-8">更复杂的应用和 API → 计算机硬件发展</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1940s" class=" text-xl mt-2 pb-2 font-sans">1940s 的计算机</h2>
<p class=" font-serif my-1">跨时代、非凡的天才设计，但很简单 (还不如我们数电实验课做的 CPU 复杂呢)：</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">计算机系统就是一个状态机 (ICS课程的精髓)</li>
<li class=" ml-8">标准的 Mealy 型数字电路</li>
</ul>
<hr>
<p class=" font-serif my-1">实现：</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">逻辑门：<a href="https://www.bilibili.com/video/av59005720" class=" text-amber-900">电子管 (vacuum tubes)</a></li>
<li class=" ml-8">存储器：延迟线 (delay lines)</li>
<li class=" ml-8">输入/输出：打孔纸带/指示灯</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1940s" class=" text-xl mt-2 pb-2 font-sans">1940s 的程序</h2>
<p class=" font-serif my-1">ENIAC 程序是用物理线路 “hard-wire” 的</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">重编程需要重新接线<ul class=" list-disc font-serif">
<li class=" ml-8"><a href="https://www.cs.drexel.edu/~bls96/eniac/" class=" text-amber-900">ENIAC Simulator</a>; <a href="../../../pages/OS/2021/demos/sieve.e" class=" text-amber-900">sieve.e</a> </li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">最早成功运行的一系列程序：打印平方数、素数表、计算弹道……</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">大家还在和真正的 “bugs” 战斗</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/first-bug.webp" width="400px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1940s" class=" text-xl mt-2 pb-2 font-sans">1940s 的操作系统</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">不需要也没有操作系统。</p>
</blockquote>
<p class=" font-serif my-1">操作系统的目标是 “支持程序的运行”</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">1940s 计算机只支持一个程序独占的运行<ul class=" list-disc font-serif">
<li class=" ml-8">程序自己就是全部</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1950s" class=" text-xl mt-2 pb-2 font-sans">1950s 的计算机</h2>
<p class=" font-serif my-1">更快更小的逻辑门 (晶体管)、更大的内存 (磁芯)、丰富的 I/O 设备</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">I/O 设备的速度已经严重低于处理器的速度，中断机制出现 (1953)</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/ERA-1101.jpg" width="360px"></p>
<p class=" font-serif my-1"></p><center>(Image: www.computerhistory.org)</center></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1950s" class=" text-xl mt-2 pb-2 font-sans">1950s 的程序</h2>
<p class=" font-serif my-1">可以执行更复杂的任务，包括通用的计算任务</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">希望使用计算机的人越来越多</li>
<li class=" ml-8">程序和程序之间开始需要协作<ul class=" list-disc font-serif">
<li class=" ml-8">程序并不希望直接用指令访问 I/O 设备，而是希望能方便地管理 “文件”</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">Fortran 诞生 (1957)</p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1950s" class=" text-xl mt-2 pb-2 font-sans">1950s 的操作系统</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">管理多个程序依次排队运行的库函数和调度器。</p>
</blockquote>
<p class=" font-serif my-1">1950s 出现了<red>让多个程序共享一台计算机</red>的需求</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">计算机非常贵 (50,000-1,000,000\$)，集中管理、排队使用</li>
</ul>
<hr>
<p class=" font-serif my-1"><red>操作系统</red>的概念开始形成</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">操作 (operate) 任务 (jobs) 的系统 (system)<ul class=" list-disc font-serif">
<li class=" ml-8">“批处理系统”<ul class=" list-disc font-serif">
<li class=" ml-8">程序的无缝自动切换</li>
<li class=" ml-8">包含程序之间共享一些代码 (例如读写文件)</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">Disk Operating Systems (DOS)</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">操作系统中开始出现 “设备”、“文件”、“任务” 等对象和 API</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1960s" class=" text-xl mt-2 pb-2 font-sans">1960s 的计算机</h2>
<p class=" font-serif my-1">集成电路、总线出现</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">更快的处理器</li>
<li class=" ml-8">更快、更大的内存；虚拟存储出现</li>
<li class=" ml-8">更丰富的 I/O 设备；完善的中断/异常机制</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/sketchpad.jpg" width="600px"></p>
<p class=" font-serif my-1"></p><center>(Image: www.computerhistory.org)</center></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1960s" class=" text-xl mt-2 pb-2 font-sans">1960s 的程序</h2>
<p class=" font-serif my-1">更多的高级语言和编译器出现</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">COBOL (1960)</li>
<li class=" ml-8">APL (1962)</li>
<li class=" ml-8">BASIC (1965)</li>
</ul>
<hr>
<p class=" font-serif my-1">计算机科学家们已经在今天难以想象的计算力下开发惊奇的程序</p>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/spacewar.jpg" width="800px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1960s" class=" text-xl mt-2 pb-2 font-sans">1960s 的操作系统</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">能载入多个程序到内存且灵活调度它们的管理程序，包括给程序提供编程接口。</p>
</blockquote>
<p class=" font-serif my-1">因为计算资源的增加，有了<red>同时将多个程序载入内存</red>的能力</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">操作系统需要决定将哪些程序装入内存</li>
<li class=" ml-8">在多个地址空间隔离的程序之间<red>切换</red><ul class=" list-disc font-serif">
<li class=" ml-8">隔离使一个程序出 bug 不会 crash 整个系统</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">操作系统中增加了 “进程” 对象和进程管理 API</p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1960s-contd" class=" text-xl mt-2 pb-2 font-sans">1960s 的操作系统 (cont'd)</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">既然操作系统已经可以在程序之间<red>切换</red>，为什么不让它们<red>定时切换</red>呢？</p>
</blockquote>
<p class=" font-serif my-1">基于中断 (例如时钟) 机制</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">时钟中断：使程序在执行时，异步地插入函数调用</li>
<li class=" ml-8">由操作系统 (调度策略) 决定是否要切换到另一个程序执行</li>
<li class=" ml-8">Multics (MIT, 1965)<ul class=" list-disc font-serif">
<li class=" ml-8">现代操作系统诞生</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1970s" class=" text-xl mt-2 pb-2 font-sans">1970s+ 的计算机</h2>
<p class=" font-serif my-1">集成电路空前发展，个人电脑兴起，“计算机” 已与今日无大异</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">CISC 指令集；中断、I/O、异常、MMU、网络</li>
<li class=" ml-8">个人计算机 (PC 机)、超级计算机……</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/apple2.jpg" width="500px"></p>
<p class=" font-serif my-1"></p><center>Apple II</center></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1970s" class=" text-xl mt-2 pb-2 font-sans">1970s+ 的程序</h2>
<p class=" font-serif my-1">PASCAL (1970), C (1972), …</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">今天能办到的，那个时代已经都能办到了——上天入地、图像声音视频、人工智能……</li>
<li class=" ml-8">计算机不再是专业人士的专属，个人开发者 (Geek Network) 走上舞台</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/wordstar.jpg" width="500px"></p>
<p class=" font-serif my-1"></p><center>Wordstar (1979)</center></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1970s" class=" text-xl mt-2 pb-2 font-sans">1970s+ 的操作系统</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">分时系统走向成熟，UNIX 诞生并走向完善，奠定了现代操作系统的形态。</p>
</blockquote>
<ul class=" list-disc font-serif">
<li class=" ml-8">1973: 信号 API、管道 (对象)、grep (应用程序)</li>
<li class=" ml-8">1983: BSD socket (对象)</li>
<li class=" ml-8">1984: procfs (对象)…… </li>
<li class=" ml-8">UNIX 衍生出的大家族<ul class=" list-disc font-serif">
<li class=" ml-8">1BSD (1977), GNU (1983), MacOS (1984), AIX (1986), Minix (1987), Windows (1985), Linux 0.01 (1991), Windows NT (1993), Debian (1996), Windows XP (2002), Ubuntu (2004), iOS (2007), Android (2008), Windows 10 (2015), ……</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">今天的操作系统</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">通过 “虚拟化” 硬件资源为程序运行提供服务的软件。</p>
</blockquote>
<p class=" font-serif my-1">空前复杂的系统之一</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">更多的处理器、更大的内存<ul class=" list-disc font-serif">
<li class=" ml-8">更多的硬件机制 Intel-VT/AMD-V, TrustZone/SGX, ...</li>
</ul>
</li>
<li class=" ml-8">更多的设备<ul class=" list-disc font-serif">
<li class=" ml-8">网卡、SSD、GPU、FPGA...</li>
</ul>
</li>
<li class=" ml-8">复杂的应用需求和应用环境 (IoT、手机、PC、服务器……)</li>
</ul>
<hr>
<p class=" font-serif my-1">在这门课中，我们会讲解其中最重要的三个头绪</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">程序、API (设计)、计算机硬件 (实现)</li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="_1" class=" text-2xl mt-2 font-sans">更多的课程信息</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="operating-systems-three-easy-pieces-ostep" class=" text-xl mt-2 pb-2 font-sans">教材：Operating Systems: Three Easy Pieces (OSTEP；黑书)</h2>
<p class=" font-serif my-1"><img alt="" class="float-right" src="../../../pages/OS/img/ostep-cover.jpg" width="300px"></p>
<p class=" font-serif my-1">OSTEP：目前世界上最好的操作系统教材之一</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">选好教材，就成功了一大半</li>
<li class=" ml-8">Open Access (免费)</li>
<li class=" ml-8">作者 (Remzi and Andrea) 是计算机系统界的 “神雕侠侣”</li>
</ul>
<hr>
<!-- 其他[阅读材料](../../OS_References) -->

<ul class=" list-disc font-serif">
<li class=" ml-8">上海交大 MOSPI 教材/视频也不错<ul class=" list-disc font-serif">
<li class=" ml-8">讲述方式和我们不太一样</li>
<li class=" ml-8">我是 SE/PL 人的阐述角度</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="class-meetings" class=" text-xl mt-2 pb-2 font-sans">Class Meetings：原理课</h2>
<p class=" font-serif my-1">顺序调整后的 operating systems: three easy pieces</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">并发 (concurrency)<ul class=" list-disc font-serif">
<li class=" ml-8">多处理器/共享内存线程</li>
<li class=" ml-8">同步、互斥、并发 bugs</li>
</ul>
</li>
<li class=" ml-8">虚拟化 (virtualization)<ul class=" list-disc font-serif">
<li class=" ml-8">进程和虚拟存储</li>
</ul>
</li>
<li class=" ml-8">持久化 (persistence)<ul class=" list-disc font-serif">
<li class=" ml-8">文件系统</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="class-meetings" class=" text-xl mt-2 pb-2 font-sans">Class Meetings：代码课</h2>
<p class=" font-serif my-1">操作系统设计 (应用视角/设计)</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">demo 小程序</li>
<li class=" ml-8">各类系统工具的实现 (strace, gdb, ...)</li>
</ul>
<hr>
<p class=" font-serif my-1">操作系统实现 (硬件视角/实现)</p>
<ul class=" list-disc font-serif">
<li class=" ml-8"><a href="https://github.com/mit-pdos/xv6-riscv" class=" text-amber-900">xv6</a><ul class=" list-disc font-serif">
<li class=" ml-8">2006 年 Russ Cox, Frans Kaashoek, Robert Morris 在 MIT 重写的 UNIX 系统</li>
<li class=" ml-8">最新的 RISC-V 版本 (别怕，别怕)</li>
</ul>
</li>
<li class=" ml-8">AbstractMachine<ul class=" list-disc font-serif">
<li class=" ml-8">2017 年为 Project-N 设计的抽象层</li>
<li class=" ml-8">在《计算机系统基础》中已经使用过</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">编程实验</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">无所谓听不听课看不看书，独立完成编程作业即可理解操作系统。</p>
</blockquote>
<p class=" font-serif my-1">应用视角 (设计)：Mini Labs x 6</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">使用 OS API 实现 “黑科技” 代码</li>
</ul>
<hr>
<p class=" font-serif my-1">硬件视角 (实现)：OS Labs x 5</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">自己动手实现一个真正的操作系统 (AbstractMachine)</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="online-judge" class=" text-xl mt-2 pb-2 font-sans">Online Judge</h2>
<p class=" font-serif my-1"><img alt="" class="float-right" src="../../../pages/OS/img/compile-error.jpg" width="250px">
本学期采用在线评测</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">Mini Labs 100% 客观评分</li>
<li class=" ml-8">OS Labs 大部分客观评分</li>
</ul>
<hr>
<p class=" font-serif my-1">严格要求大家</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">代码不规范 → <code>-Wall -Werror</code> 编译出错<ul class=" list-disc font-serif">
<li class=" ml-8">例子：unused variable</li>
</ul>
</li>
<li class=" ml-8">代码不可移植 → 编译/运行时出错<ul class=" list-disc font-serif">
<li class=" ml-8">例子：<code>int x = (int)&y;</code></li>
</ul>
</li>
<li class=" ml-8">硬编码路径/文件名 → 运行时出错<ul class=" list-disc font-serif">
<li class=" ml-8">例子：<code>fopen("/home/jyy/a.txt", "r")</code></li>
</ul>
</li>
<li class=" ml-8">糊弄 → 测试失败</li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="_1" class=" text-2xl mt-2 font-sans">总结</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">总结</h2>
<p class=" font-serif my-1">本次课内容与目标</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">快速过完学习 “操作系统” 之前你应该掌握的知识</li>
<li class=" ml-8">快速过完 “操作系统” 课程的全部内容</li>
</ul>
<hr>
<p class=" font-serif my-1">Take-away message</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">操作系统没有传说中那么复杂<ul class=" list-disc font-serif">
<li class=" ml-8">三个关键：程序、API、计算机硬件<ul class=" list-disc font-serif">
<li class=" ml-8">从简单到复杂去理解</li>
</ul>
</li>
</ul>
</li>
<li class=" ml-8"><strike>这门课没有传说中那么可怕</strike></li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="end" class=" text-2xl mt-2 font-sans">End.</h1></div></div></div>
        
      
      </section>
    
    </section>
  
</div>
</div>

<script src="../../../static/reveal/reveal.js"></script>
<script>
  Reveal.initialize({
    
    width: 1024, height: 768,
    
    slideNumber: 'c/t',
    controlsTutorial: false,
    progress: false,
    hash: true,
    center: false,
    autoAnimateUnmatched: true,
    autoAnimateEasing: 'ease-out',
    autoAnimateDuration: 0.3,
    transitionSpeed: 'fast'
  });
</script>


</body>

</html>