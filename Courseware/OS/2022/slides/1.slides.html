<!DOCTYPE html><html class="h-100">


<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="../../../static/css/base.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com/"></script>
  <link href="https://fonts.font.im/css?family=Source+Serif+Pro%7CLato%7CInconsolata" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="../../../static/img/favicon.png" type="image/x-icon">

  <style>
    .font-sans {
      font-family: 'Lato', 'SimHei', 'STHeiti', 'SimHei', 'Serif';
    }
    .font-serif {
      font-family: 'Source Serif Pro', 'Songti SC', 'SimSun', 'Serif', serif;
    }
  </style>
  <link rel="stylesheet" href="../../../static/katex/katex.min.css">
  <script defer src="../../../static/katex/katex.min.js"></script>
  <script defer src="../../../static/katex/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
  <script>
      document.addEventListener("DOMContentLoaded", function() {
          renderMathInElement(document.body, {
            // customised options
            // • auto-render specific keys, e.g.:
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false},
                {left: '\\(', right: '\\)', display: false},
                {left: '\\[', right: '\\]', display: true}
            ],
            // • rendering keys, e.g.:
            throwOnError : false
          });
      });
  </script>


  

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="../../../static/reveal/reveal.css">
<link rel="stylesheet" href="../../../static/reveal/theme/simple.css" id="theme">

<style>
.reveal .slide-number {
  font-size: 26px;
  border-radius: 5px;
  background-color: rgba(0, 0, 0, .3);
}

.reveal .full-screen {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
}

.reveal .slides {
  border: 1.5px #ddd solid;
  border-radius: 7px;
  text-align: left;
  font-weight: 300;
}

.reveal h1, .reveal h2, .reveal h3, .reveal h4 {
  font-family: 'Lato', 'SimHei', 'STXihei', 'Droid Sans';
  font-weight: 400;
}

.reveal p, .reveal li, .reveal center {
  font-size: 32px;
  font-family: 'Lato', 'STHeiti', 'SimHei', 'Droid Sans';
}

.reveal li + li {
  margin-top: 10px;
}

.reveal ul {
  display: block;
  margin-right: 15px;
}

.reveal p, .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5 {
  padding:  0 25px 0 25px;
}

.reveal table {
  font-size: 32px;
  font-family: 'Lato', 'STHeiti', 'SimHei', 'Sans Serif';
  margin-top: 15px;
  margin-bottom: 15px;
}

.reveal th {
  background-color: #eee;
}

.reveal tr:nth-child(even) {
  background-color: #efffff;
}

.reveal h1,
.reveal h2,
.reveal h3,
.reveal h4,
.reveal h5,
.reveal h6 {
  text-align: left;
  margin: 0 0 20px 0;
 color: #222; 
  font-weight: 400;
  line-height: 1.2;
  letter-spacing: normal;
}



.reveal h1 {
  margin: 0 10 0 10;
  font-size: 60px;
}
.reveal .middle h1 {
  text-align: center;
}

.reveal h2 {
  font-size: 48px;
  border-bottom: 2px solid rgb(106, 0, 95);
  padding-bottom: 5px;
}
.reveal h3 { font-size: 1.15em; }
.reveal h4 { font-size: 1.05em; }

.reveal .center {
  text-align: center;
}

.reveal .middle {
  height: 728px;
  display: flex;
  align-items: center;
  width: 100%;
}

.reveal pre {
  font-size: 28px;
 
  background-color: #eee;

  border-radius: 3mm;
  padding: 10px 10px 10px 10px;
}

.reveal pre code {
  max-height: none;
}

.reveal code {
  font-family: 'Inconsolata', 'AR PL Ukai CN', 'STKaiti', 'KaiTi', 'Sans Serif', Monospace;
}

.reveal .middle blockquote {
  text-align: center;
  color: rgb(106, 0, 95);
  background: none;
  box-shadow: none;
}

.reveal .middle blockquote a {
  color: inherit;
}

.reveal blockquote p, .reveal blockquote li {
  font-family: 'Lato', 'AR PL Ukai CN', 'STKaiti', 'KaiTi', 'Sans Serif';
}

section .center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.reveal .author-block {
  margin: 75px 0 35px 0;
}
.reveal .author-affiliation img {
  margin: 15px 0 0 0;
}
.reveal .author-block p, .reveal .author-affiliation p  {
  font-family: 'Kaiti', 'STKaiti', 'Serif', 'Times', 'Times New Roman';
  margin-block-start: 0em;
  margin-block-end: 0em;
}
.reveal .author-affiliation {
  display: inline-block;
  font-size: 90%;
}
.reveal hr {
  border: 10px solid rgba(0, 0, 0, 0);
}
.reveal li {
  margin-top: 10px;
}
</style>

  <title>操作系统概述</title>
</head>

<body class="d-flex flex-column h-100">
  
  

<div class="reveal">
<div class="slides">
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="_1" class=" text-2xl mt-2 font-sans">操作系统概述</h1>
<p class=" font-serif my-1"><include src="Slides_Author/index.html"><div><div class="py-16">
<p class=" font-serif my-1"><a href="http://ics.nju.edu.cn/~jyy" class=" text-amber-900">蒋炎岩</a></p>
</div>
<div class="row">
<div class="author-affiliation">
    <a href="http://www.nju.edu.cn/" class=" text-amber-900"><p class=" font-serif my-1">　　南京大学　　</p>
    <img class="inline-img h-24" src="../../../static/img/nju-logo.jpg" style="display: inline-block;"></a>
  </div>
<div class="author-affiliation">
   <a href="http://cs.nju.edu.cn/" class=" text-amber-900"><p class=" font-serif my-1">计算机科学与技术系</p>
    <img class="inline-img h-24" src="../../../static/img/njucs-logo.jpg" style="display: inline-block;"></a>
  </div>
<div class="author-affiliation">
    <a href="https://cs.nju.edu.cn/ics/" class=" text-amber-900"><p class=" font-serif my-1">计算机软件研究所</p>
    <img class="inline-img h-24" src="../../../static/img/ics-logo.png" style="display: inline-block;"></a>
  </div>
</div></div></include></p></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="overview" class=" text-xl mt-2 pb-2 font-sans">Overview</h2>
<p class=" font-serif my-1">本次课回答的问题</p>
<ul class=" list-disc font-serif">
<li class=" ml-8"><strong>Q1</strong> (Why): 为什么要学操作系统？</li>
<li class=" ml-8"><strong>Q2</strong> (What): 到底什么是操作系统？</li>
<li class=" ml-8"><strong>Q3</strong> (How): 怎么学操作系统？</li>
</ul>
<hr>
<p class=" font-serif my-1">本次课主要内容</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">前导知识概述</li>
<li class=" ml-8">操作系统的历史/宏观概述</li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="_1" class=" text-2xl mt-2 font-sans">个人/课程简介</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">我是谁？</h2>
<p class=" font-serif my-1"><img alt="" class="float-right" src="../../../pages/talks/img/frog-head.jpg" width="250px"></p>
<p class=" font-serif my-1"><del>努力成为卷王的临时工✖️</del> (<a href="http://cs.nju.edu.cn/ics/" class=" text-amber-900">计算机软件研究所✔</a>)</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">“软件自动化”：测试/分析；代码合成</li>
<li class=" ml-8">Two ACM SIGSOFT Distinguished Paper Awards; Best Paper Award @ ICSE'21</li>
</ul>
<hr>
<p class=" font-serif my-1">Co-Founder of Project-N</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">在 bare-metal 上实现完整计算机系统</li>
</ul>
<hr>
<p class=" font-serif my-1">JSOI/<strike>南京大学 ICPC 集训队</strike>教练</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">CCF NOI/NOIP 系列赛江苏赛区技术负责人</li>
<li class=" ml-8">ICPC World Finals 49th Place (2009, team leader)</li>
<li class=" ml-8">ICPC World Finals 13th Place (2019, co-coach)</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">课程信息与成绩构成</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">所有课程信息都在<a href="../index-2.html" class=" text-amber-900">课程主页</a>发布 (请 RTFM)！</p>
</blockquote>
<p class=" font-serif my-1">成绩构成</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">期末考试 40% + 随堂期中测验 10% </li>
<li class=" ml-8">大实验 25% + 小实验 25%<ul class=" list-disc font-serif">
<li class=" ml-8">soft + hard deadlines<ul class=" list-disc font-serif">
<li class=" ml-8"><red>不要对编程抱有任何侥幸心理</red></li>
<li class=" ml-8">无论你基础如何，都相信自己能做到</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">不强制要求到课 </p>
<ul class=" list-disc font-serif">
<li class=" ml-8">努力上传视频，但不保证设备不会翻车</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="academic-integrity" class=" text-xl mt-2 pb-2 font-sans">学术诚信 (Academic Integrity)</h2>
<p class=" font-serif my-1"><a href="https://integrity.mit.edu/" class=" text-amber-900">Academic integrity</a> 不是底线，而是 “自发的要求”</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">对 “不应该做的事情” 有清楚的认识<ul class=" list-disc font-serif">
<li class=" ml-8"><red><strong>不将代码上传到互联网</strong></red></li>
<li class=" ml-8"><red><strong>主动不参考别人完成的实验代码</strong></red></li>
<li class=" ml-8"><red><strong>不使用他人测试用例</strong></red> (depends)</li>
</ul>
</li>
<li class=" ml-8">有些行为可能使你<strong>得到分数</strong>，但<strong>失去应有的训练</strong></li>
</ul>
<hr>
<p class=" font-serif my-1">只在 “绝对可以求助” 的时候才寻求帮助</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">在全民内卷、不劳而获很容易的时代很难</li>
<li class=" ml-8">但坚持下来的人会变得很不一样</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">四周目反思</h2>
<p class=" font-serif my-1">四周目表现平稳</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">增加了更多的代码课和代码示例<ul class=" list-disc font-serif">
<li class=" ml-8">非递归汉诺塔</li>
<li class=" ml-8"><code>.dl</code> 二进制文件格式与动态加载器</li>
<li class=" ml-8">model checker (本周目将得到大幅改进)</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">第五周目</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">工具现代化 + 新手友好<ul class=" list-disc font-serif">
<li class=" ml-8">绝大部分代码示例都在 Windows 应用商店安装的 Ubuntu</li>
</ul>
</li>
<li class=" ml-8">更多的 xv6 (大家有 RISC-V 的基础了)</li>
<li class=" ml-8">逐渐重构 Online Judge</li>
<li class=" ml-8">更新一部分实验 (如果可以的话，有一个 POSIX subsystem)</li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="q1" class=" text-2xl mt-2 font-sans">Q1: 为什么要学操作系统？</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">为什么要学操作系统？</h2>
<p class=" font-serif my-1"><img alt="" class="float-right" src="../../../pages/OS/img/mariner.jpg" width="300px"></p>
<p class=" font-serif my-1">为什么要学操作系统呢？</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">为什么要学微积分/离散数学/XXXX/……？</li>
<li class=" ml-8">长辈/学长：<del>擦干泪不要问为什么</del></li>
</ul>
<hr>
<p class=" font-serif my-1">微积分 “被混起来” 的几件事</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">Newton 时代的微积分 (启蒙与应用)<ul class=" list-disc font-serif">
<li class=" ml-8">现代方法：Mathematica, <a href="https://docs.sympy.org/latest/tutorial/index.html" class=" text-amber-900">sympy</a>, <a href="http://sagemath.org/" class=" text-amber-900">sage</a><ul class=" list-disc font-serif">
<li class=" ml-8">这也是为什么我主张第一门语言学 Python</li>
</ul>
</li>
</ul>
</li>
<li class=" ml-8">Cauchy 时代的微积分 (严格化与公理化)<ul class=" list-disc font-serif">
<li class=" ml-8">以及之后各种卡出的 bug (Weierstrass 函数、Peano 曲线……)</li>
</ul>
</li>
<li class=" ml-8">微积分的现代应用<ul class=" list-disc font-serif">
<li class=" ml-8">优化、有限元、PID……</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">学习操作系统的目的</h2>
<p class=" font-serif my-1"><red>你体内的 “编程力量” 尚未完全觉醒</red></p>
<ul class=" list-disc font-serif">
<li class=" ml-8">每天都在用的东西，你还没搞明白<ul class=" list-disc font-serif">
<li class=" ml-8">窗口是怎么创建的？<a href="https://stackoverflow.blog/2017/05/23/stack-overflow-helping-one-million-developers-exit-vim/" class=" text-amber-900">为什么 Ctrl-C 有时不能退出程序</a>？</li>
</ul>
</li>
<li class=" ml-8">组里的服务器有 128 个处理器，但你的程序却只能用一个 😂</li>
<li class=" ml-8">你每天都在用的东西，你却实现不出来<ul class=" list-disc font-serif">
<li class=" ml-8">浏览器、编译器、IDE、游戏/外挂、任务管理器、杀毒软件、病毒……</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1"><red>《操作系统》给你有关 “编程” 的全部</red></p>
<ul class=" list-disc font-serif">
<li class=" ml-8">悟性好：学完课程就在系统方向 “毕业”<ul class=" list-disc font-serif">
<li class=" ml-8">具有编写一切 “能写出来” 程序的能力 (具备阅读论文的能力)</li>
</ul>
</li>
<li class=" ml-8">悟性差：内力大增<ul class=" list-disc font-serif">
<li class=" ml-8">可能工作中的某一天想起上课提及的内容</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">学习操作系统的目的</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">充满热情而且相当聪明的学生...早就听说过物理学如何有趣...相对论、量子力学……但是，当他们学完两年以前那种课程后，许多人就泄气了……学的还是斜面、静电这样的内容</p>
<p class=" font-serif my-1">——《The Feynman Lectures on Physics, 1963》</p>
</blockquote>
<p class=" font-serif my-1">我学《操作系统》的时候 (2009)，大家都说操作系统很难教</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">使用<del>豆瓣评分高达 5.7/10</del> 的 “全国优秀教材”<ul class=" list-disc font-serif">
<li class=" ml-8">没有正经的实验 (写一些 16-bit code)</li>
<li class=" ml-8">完全错误的 toolchain，调试全靠蛮力和猜</li>
<li class=" ml-8">为了一点微不足道的分数内卷、沾沾自喜、失去 integrity</li>
</ul>
</li>
<li class=" ml-8">这么玩，<red>脖子都要被美国人掐断了</red><ul class=" list-disc font-serif">
<li class=" ml-8">这门课的另一个意义：<red>告诉你可以去变得更强、真正的强</red></li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="q2" class=" text-2xl mt-2 font-sans">Q2: 到底什么是操作系统？</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">什么是操作系统？</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">Operating System: A body of software, in fact, that is responsible for <em>making it easy to run programs</em> (even allowing you to seemingly run many at the same time), allowing programs to share memory, enabling programs to interact with devices, and other fun stuff like that. (OSTEP)</p>
</blockquote></div>
        
      
         <div class="fragment"> 
        <div><hr>
<p class=" font-serif my-1">很多疑点</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">“programs” 就完了？那么多复杂的程序呢！</li>
<li class=" ml-8">“shared memory, interact with devices, ...”？</li>
</ul></div>
         </div> 
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="contd" class=" text-xl mt-2 pb-2 font-sans">什么是操作系统？ (cont'd)</h2>
<p class=" font-serif my-1">“管理软/硬件资源、为程序提供服务” 的程序？</p>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/os-classify.jpg" width="768px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">理解操作系统</h2>
<p class=" font-serif my-1">“精准” 的定义毫无意义</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">问出正确的问题：操作系统如何从一开始变成现在这样的？</li>
<li class=" ml-8">三个重要的线索<ul class=" list-disc font-serif">
<li class=" ml-8">计算机 (硬件)</li>
<li class=" ml-8">程序 (软件)</li>
<li class=" ml-8">操作系统 (管理软件的软件)</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">本课程讨论<red>狭义的操作系统</red></p>
<ul class=" list-disc font-serif">
<li class=" ml-8">对单一计算机硬件系统作出抽象、支撑程序执行的软件系统</li>
<li class=" ml-8">学术界谈论 “操作系统” 是更广义的 “System” (例子：OSDI/SOSP)</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1940s" class=" text-xl mt-2 pb-2 font-sans">1940s 的计算机</h2>
<p class=" font-serif my-1">跨时代、非凡的天才设计，但很简单 (还不如我们数电实验课做的 CPU 复杂呢)：</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">计算机系统 = 状态机 (ICS 课程的 takeaway message)</li>
<li class=" ml-8">标准的 Mealy 型数字电路<ul class=" list-disc font-serif">
<li class=" ml-8">ENIAC (1946.2.14；请在这个特殊的节日多陪陪你的电脑)</li>
</ul>
</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/eniacrun.jpg" width="650px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1940s-contd" class=" text-xl mt-2 pb-2 font-sans">1940s 的计算机 (cont'd)</h2>
<p class=" font-serif my-1">电子计算机的实现</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">逻辑门：<a href="https://www.bilibili.com/video/av59005720" class=" text-amber-900">真空电子管</a></li>
<li class=" ml-8">存储器：延迟线 (delay lines)</li>
<li class=" ml-8">输入/输出：打孔纸带/指示灯</li>
</ul>
<p class=" font-serif my-1"></p><center>
<img alt="" class="inline" src="../../../pages/OS/img/vaccum-tube.gif" width="250px">
<img alt="" class="inline" src="../../../pages/OS/img/throw-ball.gif" width="300px">
<img alt="" class="inline" src="../../../pages/OS/img/delay-memory-fig2-s.gif" width="400px">
</center></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1940s" class=" text-xl mt-2 pb-2 font-sans">1940s 的程序</h2>
<p class=" font-serif my-1">ENIAC 程序是用物理线路 “hard-wire” 的</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">重编程需要重新接线<ul class=" list-disc font-serif">
<li class=" ml-8"><a href="https://www.cs.drexel.edu/~bls96/eniac/" class=" text-amber-900">ENIAC Simulator</a>; <a href="../../../pages/OS/2022/demos/sieve.e" class=" text-amber-900">sieve.e</a> </li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">最早成功运行的一系列程序：打印平方数、素数表、计算弹道……</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">大家还在和真正的 “bugs” 战斗</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/first-bug.webp" width="400px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1940s" class=" text-xl mt-2 pb-2 font-sans">1940s 的操作系统</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">没有操作系统。</p>
</blockquote>
<p class=" font-serif my-1">能把程序放上去就很了不起了</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">程序直接用指令操作硬件</li>
<li class=" ml-8">不需要画蛇添足的程序来管理它</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1950s" class=" text-xl mt-2 pb-2 font-sans">1950s 的计算机</h2>
<p class=" font-serif my-1">更快更小的逻辑门 (晶体管)、更大的内存 (磁芯)、丰富的 I/O 设备</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">I/O 设备的速度已经严重低于处理器的速度，中断机制出现 (1953)</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/ERA-1101.jpg" width="360px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1950s" class=" text-xl mt-2 pb-2 font-sans">1950s 的程序</h2>
<p class=" font-serif my-1">可以执行更复杂的任务，包括通用的计算任务</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">希望使用计算机的人越来越多；希望调用 API 而不是直接访问设备</li>
<li class=" ml-8">Fortran 诞生 (1957)</li>
</ul>
<div class="codehilite"><pre class=" bg-gray-100 overflow-x-auto rounded p-2 mb-2 mt-2"><span></span><code>C---- THIS PROGRAM READS INPUT FROM THE CARD READER,
C---- 3 INTEGERS IN EACH CARD, CALCULATE AND OUTPUT
C---- THE SUM OF THEM.
  100 READ(5,10) I1, I2, I3
   10 FORMAT(3I5)
      IF (I1.EQ.0 .AND. I2.EQ.0 .AND. I3.EQ.0) GOTO 200
      ISUM = I1 + I2 + I3
      WRITE(6,20) I1, I2, I3, ISUM
   20 FORMAT(7HSUM OF , I5, 2H, , I5, 5H AND , I5,
     *   4H IS , I6)
      GOTO 100
  200 STOP
      END
</code></pre></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1950s-contd" class=" text-xl mt-2 pb-2 font-sans">1950s 的程序 (cont'd)</h2>
<p class=" font-serif my-1">一行代码，一张卡片</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">看到上面 1, 2, ... 80 的标号了吧！</li>
<li class=" ml-8">7-72 列才是真正的语句 (这就是为什么谭浩强要教你要画流程图) </li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/fortran-card.jpg" width="900px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1950s" class=" text-xl mt-2 pb-2 font-sans">1950s 的操作系统</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">管理多个程序依次排队运行的库函数和调度器。</p>
</blockquote>
<p class=" font-serif my-1">写程序、跑程序都是非常费事的 (比如你写了个死循环……)</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">计算机非常贵 (\$50,000-\$1,000,000)，一个学校只有一台</li>
<li class=" ml-8">产生了集中管理计算机的需求：<red>多用户排队共享计算机</red></li>
</ul>
<hr>
<p class=" font-serif my-1"><red>操作系统</red>的概念开始形成</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">操作 (operate) 任务 (jobs) 的系统 (system)<ul class=" list-disc font-serif">
<li class=" ml-8">“批处理系统” = 程序的自动切换 (换卡) + 库函数 API</li>
<li class=" ml-8">Disk Operating Systems (DOS)<ul class=" list-disc font-serif">
<li class=" ml-8">操作系统中开始出现 “设备”、“文件”、“任务” 等对象和 API</li>
</ul>
</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1960s" class=" text-xl mt-2 pb-2 font-sans">1960s 的计算机</h2>
<p class=" font-serif my-1">集成电路、总线出现</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">更快的处理器</li>
<li class=" ml-8">更快、更大的内存；虚拟存储出现<ul class=" list-disc font-serif">
<li class=" ml-8"><red>可以同时载入多个程序而不用 “换卡” 了</red></li>
</ul>
</li>
<li class=" ml-8">更丰富的 I/O 设备；完善的中断/异常机制</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/sketchpad.jpg" width="600px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1960s" class=" text-xl mt-2 pb-2 font-sans">1960s 的程序</h2>
<p class=" font-serif my-1">更多的高级语言和编译器出现</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">COBOL (1960), APL (1962), BASIC (1965)<ul class=" list-disc font-serif">
<li class=" ml-8">Bill Gates 和 Paul Allen 在 1975 年实现了 Altair 8800 上的 BASIC 解释器</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">计算机科学家们已经在今天难以想象的计算力下开发惊奇的程序</p>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/spacewar.jpg" width="800px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1960s" class=" text-xl mt-2 pb-2 font-sans">1960s 的操作系统</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">能载入多个程序到内存且灵活调度它们的管理程序，包括程序可以调用的 API。</p>
</blockquote>
<p class=" font-serif my-1"><red>同时将多个程序载入内存</red>是一项巨大的能力</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">有了进程 (process) 的概念</li>
<li class=" ml-8">进程在执行 I/O 时，可以将 CPU 让给另一个进程<ul class=" list-disc font-serif">
<li class=" ml-8">在多个地址空间隔离的程序之间<red>切换</red></li>
<li class=" ml-8">虚拟存储使一个程序出 bug 不会 crash 整个系统</li>
</ul>
</li>
</ul>
<hr>
<p class=" font-serif my-1">操作系统中自然地增加进程管理 API</p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1960s-contd" class=" text-xl mt-2 pb-2 font-sans">1960s 的操作系统 (cont'd)</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">既然操作系统已经可以在程序之间<red>切换</red>，为什么不让它们<red>定时切换</red>呢？</p>
</blockquote>
<p class=" font-serif my-1">基于中断 (例如时钟) 机制</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">时钟中断：使程序在执行时，异步地插入函数调用</li>
<li class=" ml-8">由操作系统 (调度策略) 决定是否要切换到另一个程序执行</li>
<li class=" ml-8">Multics (MIT, 1965)<ul class=" list-disc font-serif">
<li class=" ml-8">现代操作系统诞生</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1970s" class=" text-xl mt-2 pb-2 font-sans">1970s+ 的计算机</h2>
<p class=" font-serif my-1">集成电路空前发展，个人电脑兴起，“计算机” 已与今日无大异</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">CISC 指令集；中断、I/O、异常、MMU、网络</li>
<li class=" ml-8">个人计算机 (PC 机)、超级计算机……</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/apple2.jpg" width="500px"></p>
<p class=" font-serif my-1"></p><center>Apple II</center></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1970s" class=" text-xl mt-2 pb-2 font-sans">1970s+ 的程序</h2>
<p class=" font-serif my-1">PASCAL (1970), C (1972), …</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">今天能办到的，那个时代已经都能办到了——上天入地、图像声音视频、人工智能……</li>
<li class=" ml-8">个人开发者 (Geek Network) 走上舞台</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/wordstar.jpg" width="500px"></p>
<p class=" font-serif my-1"></p><center>Wordstar (1979)</center></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1970s" class=" text-xl mt-2 pb-2 font-sans">1970s+ 的操作系统</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">分时系统走向成熟，UNIX 诞生并走向完善，奠定了现代操作系统的形态。</p>
</blockquote>
<ul class=" list-disc font-serif">
<li class=" ml-8">1973: 信号 API、管道 (对象)、grep (应用程序)</li>
<li class=" ml-8">1983: BSD socket (对象)</li>
<li class=" ml-8">1984: procfs (对象)…… </li>
<li class=" ml-8">UNIX 衍生出的大家族<ul class=" list-disc font-serif">
<li class=" ml-8">1BSD (1977), GNU (1983), MacOS (1984), AIX (1986), Minix (1987), Windows (1985), Linux 0.01 (1991), Windows NT (1993), Debian (1996), Windows XP (2002), Ubuntu (2004), iOS (2007), Android (2008), Windows 10 (2015), ……</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">今天的操作系统</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">通过 “虚拟化” 硬件资源为程序运行提供服务的软件。</p>
</blockquote>
<p class=" font-serif my-1">空前复杂的系统之一</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">更复杂的处理器和内存<ul class=" list-disc font-serif">
<li class=" ml-8">非对称多处理器 (ARM big.LITTLE; Intel P/E-cores)</li>
<li class=" ml-8">Non-uniform Memory Access (NUMA)</li>
<li class=" ml-8">更多的硬件机制 Intel-VT/AMD-V, TrustZone/<del>SGX</del>, TSX, ...</li>
</ul>
</li>
<li class=" ml-8">更多的设备和资源<ul class=" list-disc font-serif">
<li class=" ml-8">网卡、SSD、GPU、FPGA...</li>
</ul>
</li>
<li class=" ml-8">复杂的应用需求和应用环境<ul class=" list-disc font-serif">
<li class=" ml-8">服务器、个人电脑、智能手机、手表、手环、IoT/微控制器……</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">理解操作系统：三个根本问题</h2>
<p class=" font-serif my-1">操作系统服务谁？</p>
<ul class=" list-disc font-serif">
<li class=" ml-8"><red>程序 = 状态机</red></li>
<li class=" ml-8">课程涉及：多线程 Linux 应用程序</li>
</ul>
<hr>
<p class=" font-serif my-1">(设计/应用视角) 操作系统为程序提供什么服务？</p>
<ul class=" list-disc font-serif">
<li class=" ml-8"><red>操作系统 = 对象 + API</red></li>
<li class=" ml-8">课程涉及：POSIX + 部分 Linux 特性</li>
</ul>
<hr>
<p class=" font-serif my-1">(实现/硬件视角) 如何实现操作系统提供的服务？</p>
<ul class=" list-disc font-serif">
<li class=" ml-8"><red>操作系统 = C 程序</red><ul class=" list-disc font-serif">
<li class=" ml-8">完成初始化后就成为 interrupt/trap/fault handler</li>
</ul>
</li>
<li class=" ml-8">课程涉及：xv6, 自制迷你操作系统</li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="q3" class=" text-2xl mt-2 font-sans">Q3: 怎么学操作系统？</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="prerequisites" class=" text-xl mt-2 pb-2 font-sans">Prerequisites</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1"><red>计算机专业学生必须具备的核心素质</red>。</p>
</blockquote>
<ol class=" list-decimal font-serif">
<li class=" ml-8">是一个合格的操作系统用户<ul class=" list-disc font-serif">
<li class=" ml-8">会 STFW/RTFM 自己动手解决问题</li>
<li class=" ml-8">不怕使用任何命令行工具<ul class=" list-disc font-serif">
<li class=" ml-8">vim, tmux, grep, gcc, binutils, ...</li>
</ul>
</li>
</ul>
</li>
<li class=" ml-8">不惧怕写代码<ul class=" list-disc font-serif">
<li class=" ml-8">能管理一定规模 (数千行) 的代码</li>
<li class=" ml-8">能在出 bug 时默念 “机器永远是对的、我肯定能调出来的”<ul class=" list-disc font-serif">
<li class=" ml-8">然后开始用正确的工具/方法调试</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<p class=" font-serif my-1">给 “学渣” 们的贴心提示：补基础、补基础、补基础</p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="1-power-user" class=" text-xl mt-2 pb-2 font-sans">1. 成为 Power User</h2>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/xkcd-tar.png"></p>
<p class=" font-serif my-1">感到 Linux/PowerShell/... 很难用？</p>
<ol class=" list-decimal font-serif">
<li class=" ml-8">没有建立信心、没有理解基本逻辑</li>
<li class=" ml-8">没有找对材料 (Baidu v.s. Google/Bing/Github/StackOverflow)</li>
<li class=" ml-8">没有用对工具 (man v.s. tldr; 该用 IDE 就别 Vim)</li>
</ol></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="2" class=" text-xl mt-2 pb-2 font-sans">2. 学会写代码</h2>
<p class=" font-serif my-1">写代码 = 创造有趣的东西</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">命令行 + 浏览器就是世界
    <img alt="" class="center" src="../../../pages/OS/img/ascii-patrol.gif" width="700px"><ul class=" list-disc font-serif">
<li class=" ml-8">我们还有 sympy, sage, z3, rich, ... 呢</li>
</ul>
</li>
<li class=" ml-8">不需要讲语言特性、设计模式、……<ul class=" list-disc font-serif">
<li class=" ml-8">编就对了；你自然而然会需要它们的</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">课程：教科书</h2>
<p class=" font-serif my-1">Remzi's <a href="https://pages.cs.wisc.edu/~remzi/OSTEP/" class=" text-amber-900">Operating Systems: Three Easy Pieces</a></p>
<ul class=" list-disc font-serif">
<li class=" ml-8">按照并发 → 虚拟化 → 持久化的顺序上课 (我自己的理解)</li>
</ul>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/ostep-fun.jpg" width="550px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">课程参考书和<a href="../../OS_References.html" class=" text-amber-900">阅读材料</a></h2>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/csapp-fun.jpg" width="500px"></p></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="talk-is-cheap-show-me-the-code" class=" text-xl mt-2 pb-2 font-sans">Talk is Cheap. Show Me the Code!</h2>
<p class=" font-serif my-1">应用视角/操作系统设计：操作系统 = 对象 + API</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">demo 小程序 (x86-64 为主)</li>
<li class=" ml-8">各类系统工具的实现 (strace, gdb, ...)</li>
</ul>
<hr>
<p class=" font-serif my-1">硬件视角/操作系统实现：操作系统 = C 程序</p>
<ul class=" list-disc font-serif">
<li class=" ml-8"><a href="https://github.com/mit-pdos/xv6-riscv" class=" text-amber-900">xv6</a><ul class=" list-disc font-serif">
<li class=" ml-8">2006 年 Russ Cox, Frans Kaashoek, Robert Morris 在 MIT 重写的 UNIX 系统</li>
<li class=" ml-8">大家熟悉的 RISC-V 版本</li>
</ul>
</li>
<li class=" ml-8">AbstractMachine<ul class=" list-disc font-serif">
<li class=" ml-8">2017 年为 Project-N 设计的抽象层</li>
<li class=" ml-8">在《计算机系统基础》中已经使用过</li>
</ul>
</li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="get-your-hands-dirty" class=" text-xl mt-2 pb-2 font-sans">最重要的：Get Your Hands Dirty</h2>
<blockquote class=" bg-gray-200 p-2 rounded mb-2 mt-2 mx-4">
<p class=" font-serif my-1">听课看书都不重要。独立完成编程作业即可理解操作系统。</p>
</blockquote>
<p class=" font-serif my-1"><img alt="" class="float-right" src="../../../pages/OS/img/compile-error.jpg" width="250px"></p>
<p class=" font-serif my-1">应用视角 (设计)：Mini Labs x 6</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">使用 OS API 实现 “黑科技” 代码</li>
</ul>
<hr>
<p class=" font-serif my-1">硬件视角 (实现)：OS Labs x 5</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">自己动手实现一个真正的操作系统</li>
</ul>
<hr>
<p class=" font-serif my-1">全部 Online Judge</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">代码不规范 → <code>-Wall -Werror</code> 编译出错</li>
<li class=" ml-8">代码不可移植 → 编译/运行时出错：<code>int x = (int)&y;</code></li>
<li class=" ml-8">硬编码路径/文件名 → 运行时出错：<code>open("/home/a/b", ...)</code></li>
</ul></div>
        
      
      </section>
    
    </section>
   
    <section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="_1" class=" text-2xl mt-2 font-sans">总结</h1></div></div></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><h2 id="_1" class=" text-xl mt-2 pb-2 font-sans">总结</h2>
<p class=" font-serif my-1">本次课回答的问题</p>
<ul class=" list-disc font-serif">
<li class=" ml-8"><strong>Q1</strong> (Why): 为什么要学操作系统？</li>
<li class=" ml-8"><strong>Q2</strong> (What): 到底什么是操作系统？</li>
<li class=" ml-8"><strong>Q3</strong> (How): 怎么学操作系统？</li>
</ul>
<hr>
<p class=" font-serif my-1">Take-away message</p>
<ul class=" list-disc font-serif">
<li class=" ml-8">操作系统没有传说中那么复杂<ul class=" list-disc font-serif">
<li class=" ml-8">程序视角：对象 + API</li>
<li class=" ml-8">硬件视角：一个 C 程序</li>
</ul>
</li>
<li class=" ml-8"><strike>这门课没有传说中那么可怕</strike></li>
</ul></div>
        
      
      </section>
    
      
      <section>
      

      
        
        <div><div class="center middle"><div style="width:100%"><h1 id="happy-hacking" class=" text-2xl mt-2 font-sans">Happy Hacking!</h1>
<p class=" font-serif my-1"><br></p>
<p class=" font-serif my-1"><img alt="" class="center" src="../../../pages/OS/img/tux-source.jpg" width="500px"></p></div></div></div>
        
      
      </section>
    
    </section>
  
</div>
</div>

<script src="../../../static/reveal/reveal.js"></script>
<script>
  Reveal.initialize({
    
    width: 1024, height: 768,
    
    slideNumber: 'c/t',
    controlsTutorial: false,
    progress: false,
    hash: true,
    center: false,
    autoAnimateUnmatched: true,
    autoAnimateEasing: 'ease-out',
    autoAnimateDuration: 0.3,
    transitionSpeed: 'fast'
  });
</script>


</body>


</html>